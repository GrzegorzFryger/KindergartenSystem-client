<div class="user-person-container">
  <mat-card [ngClass]="isEdit? 'resize': ''" class="person-card">
    <mat-card-content>
      <div class="person-content-container">
        <div class="header-item">
          <div class="header">
            <div class="center">
              <img src="../../../assets/images/tata.png" height="150" width="150" class="img-fluid"/>
            </div>
            <div class="center">
              {{person?.name }}  {{person?.surname }}
            </div>
          </div>
        </div>

        <mat-divider [inset]="true"></mat-divider>

        <div class="person-data-item contact">
          <p>Dane kontaktowe:</p>
          <div class="d-flex">
            <div class="item street">
              <div class="item-container">
                <div class="label">Telefon:</div>
                <div class="value">{{person?.phone}}</div>
              </div>
            </div>
            <div class="item city">
              <div class="item-container">
                <div class="label">Email:</div>
                <div class="value">{{person?.email}}</div>
              </div>
            </div>
          </div>
        </div>

        <div class="person-data-item address">
          <p>Adres:</p>
          <div class="d-flex">
            <div class="item street">
              <div class="item-container">
                <div class="label">Ulica:</div>
                <div class="value">{{person?.streetNumber}}</div>
              </div>
            </div>
            <div class="item city">
              <div class="item-container">
                <div class="label">Kod pocztowy:</div>
                <div class="value">{{person?.postalCode}}</div>
              </div>
            </div>
            <div class="item zip-code">
              <div class="item-container">
                <div class="label">Miasto:</div>
                <div class="value">{{person?.city}}</div>
              </div>
            </div>
          </div>
        </div>

        <ng-template [ngIf]="isInstanceOfGuardian">
          <div class="person-data-item children">
            <p>Lista dzieci:</p>
            <div class="d-flex justify-content-center padding-8">
              <div *ngFor="let child of person.children" class="item-container">
                <div class="value margin-child">
                  <img *ngIf="child.gender === 'FEMALE'" src="../../../assets/images/girl.png" height="50" width="50"
                       class="img-fluid" alt="dziewczynka"/>
                  <img *ngIf="child.gender === 'MALE'" src="../../../assets/images/icon-boy.png" height="50" width="50"
                       class="img-fluid" alt="chÅ‚opiec"/>
                </div>
                <div class="label">{{child.name}}</div>
              </div>
            </div>
          </div>
        </ng-template>

      </div>
    </mat-card-content>
    <mat-card-footer>
      <div class="footer-container">
        <div class="button">
          <button mat-raised-button (click)="close('person')" color="primary">Cofnij</button>
        </div>
        <div class="button">
          <button mat-raised-button (click)="openEdit()" color="primary">Edytuj</button>
        </div>
      </div>
    </mat-card-footer>

  </mat-card>

  <mat-card *ngIf="isEdit" class="person-edit-card">
    <mat-card-content>
      <div class="d-flex">
        <form class="person-form-container" [formGroup]="form" (ngSubmit)="onSubmit()">
          <p>Postawowe dane:</p>
          <div class="section">
            <mat-form-field appearance="standard">
              <mat-label>Imie</mat-label>
              <input matInput placeholder="Imie" formControlName="name">
              <mat-error *ngIf="hasError('name', 'required')">Imie jest wymagane</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard">
              <mat-label>Nazwisko</mat-label>
              <input matInput placeholder="Nazwisko" formControlName="surname">
              <mat-error *ngIf="hasError('surname', 'required')">Imie jest wymagan</mat-error>
            </mat-form-field>
          </div>
          <p>Dane kontaktowe:</p>
          <div class="section">
            <mat-form-field appearance="standard">
              <mat-label>Email</mat-label>
              <input matInput placeholder="email" formControlName="email">
              <mat-error *ngIf="hasError('email', 'required')">Email jest wymagan</mat-error>
              <mat-error *ngIf="hasError('email', 'email')">Email jest niepoprawny</mat-error>
            </mat-form-field>

            <mat-form-field appearance="standard">
              <mat-label>Telefon</mat-label>
              <input matInput placeholder="phone" formControlName="phone">
              <mat-error *ngIf="hasError('phone', 'required')">Telefon jest wymagany</mat-error>
            </mat-form-field>
          </div>
          <p>Adres:</p>
          <div class="section" formGroupName="address">
            <mat-form-field appearance="standard">
              <mat-label>Kod pocztowy</mat-label>
              <input matInput placeholder="Kod pocztowy" formControlName="zip_code">
              <mat-error *ngIf="hasChildError('address','zip_code','required')">Kod pocztowy jest wymagany</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard">
              <mat-label>Miasto</mat-label>
              <input matInput placeholder="city" formControlName="city">
              <mat-error *ngIf="hasChildError('address','city','required')">Miasto jest wymagane</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard">
              <mat-label>Ulica i numer</mat-label>
              <input matInput placeholder="street" formControlName="street">
              <mat-error *ngIf="hasChildError('address','street','required')">Ulica jest wymagana</mat-error>
            </mat-form-field>
          </div>
        </form>
      </div>
    </mat-card-content>

    <mat-card-footer>
      <div class="footer-container">
        <div class="button">
          <button mat-raised-button (click)="close('edit')" color="primary">Anuluj</button>
        </div>
        <div class="button">
          <button mat-raised-button color="primary">Zapisz</button>
        </div>
      </div>
    </mat-card-footer>
  </mat-card>

</div>
